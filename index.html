<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COSMIC_GLOBE_V27_FIXED</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        /* üö® TOTAL STYLE RESET - FORCING NEW LAYOUT */
        :root { --glow: #00ff41; --bg: #000000; }
        body, html { margin: 0; padding: 0; background: #000 !important; color: var(--glow); font-family: 'Rajdhani', sans-serif; width: 100vw; height: 100vh; overflow: hidden; }
        
        #star-field { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .mega-star { position: absolute; background: white; border-radius: 50%; opacity: 0.6; box-shadow: 0 0 15px white; }

        #main-container { display: flex; width: 100vw; height: 100vh; position: relative; z-index: 10; background: transparent; }

        /* üóÑÔ∏è THE COMPLETE SIDE MENU */
        #side-panel {
            width: 320px; background: rgba(0, 5, 0, 0.95); 
            border-right: 2px solid var(--glow); padding: 20px;
            display: flex; flex-direction: column; gap: 15px;
            box-shadow: 10px 0 50px rgba(0,0,0,1);
        }

        #timer-zone { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }

        .card { background: rgba(0, 40, 0, 0.2); border: 1px solid var(--glow); padding: 12px; border-radius: 4px; }
        h3 { font-family: 'Orbitron'; font-size: 0.7rem; letter-spacing: 2px; margin: 0 0 8px 0; color: #fff; text-transform: uppercase; }
        
        #timer-display { font-family: 'Orbitron', sans-serif; font-size: 8rem; font-weight: 900; text-shadow: 0 0 30px var(--glow); margin: 0; }

        input, button {
            font-family: 'Rajdhani', sans-serif; width: 100%; padding: 10px; margin: 4px 0;
            background: #000; border: 1px solid var(--glow); color: var(--glow); font-weight: bold; box-sizing: border-box;
        }

        button { background: var(--glow); color: #000; border: none; cursor: pointer; text-transform: uppercase; font-weight: 900; }
        button:hover { background: #fff; box-shadow: 0 0 15px #fff; }

        #task-box { max-height: 120px; overflow-y: auto; font-size: 0.85rem; margin-bottom: 5px; }
        .task-item { display: flex; justify-content: space-between; padding: 4px; border-bottom: 1px solid rgba(0,255,65,0.1); }

        #iroh-box { font-style: italic; font-size: 0.95rem; text-align: center; color: #fff; min-height: 50px; border-bottom: 1px solid var(--glow); margin-bottom: 10px; }
        
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; text-align: center; font-family: 'Orbitron'; font-size: 0.65rem; }
        .stat-num { font-size: 1.2rem; display: block; color: var(--glow); }

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div id="star-field"></div>
    <audio id="bg-audio" loop></audio>

    <div id="boot-screen" class="overlay">
        <h1 style="font-family:'Orbitron'; font-size: 2.5rem; letter-spacing: 10px; margin-bottom: 30px;">COSMIC_GLOBE</h1>
        <button onclick="startSystem()" style="width: 250px; padding: 20px;">INITIATE_SYSTEM</button>
    </div>

    <div id="main-container" class="hidden">
        <div id="side-panel">
            <div class="card">
                <h3>üçµ Iroh_Neural_Link</h3>
                <div id="iroh-box">"Seek the light within."</div>
                <input type="text" id="iroh-in" placeholder="Ask Uncle Iroh..." onkeydown="if(event.key==='Enter') irohTalk()">
                <button onclick="irohTalk()" style="font-size: 0.6rem; padding: 4px;">QUERY</button>
            </div>

            <div class="card">
                <h3>üìã Mission_Objectives</h3>
                <div id="task-box"></div>
                <button onclick="addT()" style="font-size: 0.6rem; padding: 4px;">+ ADD_TASK</button>
            </div>

            <div class="card">
                <h3>üèÜ Pilot_Logs</h3>
                <div class="stat-grid">
                    <div>SESSIONS<br><span id="s-count" class="stat-num">0</span></div>
                    <div>TOTAL_MIN<br><span id="m-count" class="stat-num">0</span></div>
                </div>
            </div>

            <div style="margin-top: auto;">
                <button id="aud-btn" onclick="toggleAud()" style="background:transparent; border: 1px solid var(--glow); color: var(--glow); margin-bottom:5px;">üîá AUDIO_OFF</button>
                <button onclick="location.reload()" style="background:#cc0000; color:white;">EXIT_STATION</button>
            </div>
        </div>

        <div id="timer-zone">
            <div id="timer-display">25:00</div>
            <button id="timer-btn" onclick="timerControl()" style="width: 250px; height: 60px; font-size: 1.3rem;">START_MISSION</button>
        </div>
    </div>

    <script>
        let rTime = 25 * 60;
        let running = false;
        let pStats = JSON.parse(localStorage.getItem('p_stats_v27_1')) || { s: 0, m: 0 };
        let pTasks = JSON.parse(localStorage.getItem('p_tasks_v27_1')) || [];
        const iQuotes = ["Hope is something you give yourself.", "Wisdom comes from many places.", "Tea is better with friends.", "Believe in yourself."];

        function stars() {
            const f = document.getElementById('star-field');
            for(let i=0; i<40; i++){
                const s = document.createElement('div'); s.className = 'mega-star';
                const sz = Math.random() * 30 + 5;
                s.style.width = s.style.height = sz + 'px';
                s.style.left = Math.random() * 100 + 'vw'; s.style.top = Math.random() * 100 + 'vh';
                f.appendChild(s);
            }
        }
        stars();

        function startSystem() {
            document.getElementById('boot-screen').classList.add('hidden');
            document.getElementById('main-container').classList.remove('hidden');
            document.getElementById('bg-audio').src = "https://stream.nightride.fm/nightride.mp3";
            updateT(); updateS();
        }

        function timerControl() {
            running = !running;
            document.getElementById('timer-btn').innerText = running ? "PAUSE" : "RESUME";
            if(running) tick();
        }

        function tick() {
            if(!running) return;
            if(rTime > 0) {
                rTime--;
                const m = Math.floor(rTime / 60).toString().padStart(2, '0');
                const s = (rTime % 60).toString().padStart(2, '0');
                document.getElementById('timer-display').innerText = `${m}:${s}`;
                setTimeout(tick, 1000);
            } else {
                pStats.s++; pStats.m += 25;
                localStorage.setItem('p_stats_v27_1', JSON.stringify(pStats));
                alert("Mission Done!"); location.reload();
            }
        }

        function irohTalk() {
            document.getElementById('iroh-box').innerText = `"${iQuotes[Math.floor(Math.random()*iQuotes.length)]}"`;
            document.getElementById('iroh-in').value = "";
        }

        function toggleAud() {
            const a = document.getElementById('bg-audio');
            const b = document.getElementById('aud-btn');
            if(a.paused) { a.play(); b.innerText = "üîä AUDIO_ON"; }
            else { a.pause(); b.innerText = "üîá AUDIO_OFF"; }
        }

        function addT() {
            const t = prompt("Task:");
            if(t) { pTasks.push(t); localStorage.setItem('p_tasks_v27_1', JSON.stringify(pTasks)); updateT(); }
        }

        function updateT() {
            document.getElementById('task-box').innerHTML = pTasks.map((t, i) => `<div class="task-item"><span>> ${t}</span><span onclick="delT(${i})" style="color:red; cursor:pointer;">[X]</span></div>`).join('');
        }

        function delT(i) { pTasks.splice(i, 1); localStorage.setItem('p_tasks_v27_1', JSON.stringify(pTasks)); updateT(); }

        function updateS() {
            document.getElementById('s-count').innerText = pStats.s;
            document.getElementById('m-count').innerText = pStats.m;
        }
    </script>
</body>
</html>
